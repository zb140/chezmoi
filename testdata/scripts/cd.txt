# test chezmoi cd
chezmoi cd
env CHEZMOI_HOME=$HOME${/}.local${/}share${/}chezmoi
exists $CHEZMOI_HOME
grep -count=1 ${CHEZMOI_HOME@R} shell.log

# test chezmoi cd with command with args (Windows variant)
[windows] env HOME=$WORK${/}home3${/}user
[windows] env USERPROFILE=$WORK${/}home3${/}user
[windows] chezmoi cd
[windows] ! stdout PowerShell
[windows] stdout works
[windows] stop

# test chezmoi cd with command with args
# windows might actually have a "bash.exe" but it is likely to point to WSL,
# which won't work for this test
[!exec:bash] stop
env HOME=$WORK/home2/user
chezmoi cd
stdout version

-- home2/user/.config/chezmoi/chezmoi.toml --
[cd]
    command = "bash"
    args = ["--version"]

-- home3/user/.config/chezmoi/chezmoi.toml --
[cd]
    command = "powershell"
    args = ["-nologo", "-command", "Write-Host 'works'"]
